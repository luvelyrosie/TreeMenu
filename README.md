# Django Tree Menu App

Полнофункциональное Django‑приложение для отображения древовидного меню с использованием template tag. Меню хранится в базе данных, редактируется через стандартную админку Django и определяет активный пункт по текущему URL. Проект полностью соответствует требованиям тестового задания.

## Реализованные требования

1. Меню выводится через template tag: `{% draw_menu 'main_menu' %}`
2. Все элементы над активным раскрыты
3. Первый уровень вложенности под активным пунктом раскрыт
4. Всё хранится в базе данных
5. Редактирование через Django Admin
6. На странице может быть несколько меню (определяются по имени)
7. Поддержка прямых URL и named URL
8. На отрисовку меню выполняется ровно **один** запрос к БД
9. Используется только Django и стандартная библиотека Python

---

# Запуск проекта

Поддерживаются два варианта:

- **Docker (рекомендуется)** — быстро и удобно
- Локальный запуск — при необходимости

---

# Запуск через Docker (рекомендуется)

## 1. Установите Docker  
https://docs.docker.com/get-docker/

## 2. Клонируйте репозиторий
```
git clone https://github.com/luvelyrosie/TreeMenu.git
cd TreeMenu
```

## 3. Запуск
```
docker-compose up --build
```

Docker автоматически:

- создаст контейнеры
- применит миграции
- создаст суперпользователя:

**Логин:** admin  
**Пароль:** admin  
**Email:** admin@example.com  

---

# Доступ к приложению

Приложение:  
http://localhost:8000/

Админка:  
http://localhost:8000/admin/

---

# Создание пунктов меню

Чтобы меню появилось на главной странице, создайте в админке пункт меню с полем:

`Menu = main_menu`

### Описание полей MenuItem:

#### **Menu**
Имя меню (например **main_menu**, чтобы меню отображалось на главной странице).

#### **Title**
Отображаемый текст пункта.

#### **Parent**
Необязательно. Позволяет вложенность.

#### **URL**
Прямой URL (например, `/`).  
Оставьте пустым, если используете named URL.

#### **Named URL**
Имя маршрута Django (например, `home`).

#### **Named url kwargs**
Параметры, пример:
```
{"id": 5}
```

#### **Order**
Порядок сортировки (меньше — выше).

#### **Open in new tab**
Открывать ссылку в новой вкладке.

#### **Image**
Опциональное изображение. Если не указано — используется дефолт.

---

# Использование в шаблонах

```
{% load draw_menu %}
{% draw_menu 'main_menu' %}
```

---

# Локальный запуск (без Docker)

## 1. Клонирование
```
git clone https://github.com/luvelyrosie/TreeMenu.git
cd TreeMenu
```

## 2. Создание виртуального окружения
```
python -m venv venv
source venv/bin/activate      # Linux/Mac
venv\Scripts\activate       # Windows
```

## 3. Установка зависимостей
```
pip install -r requirements.txt
```

## 4. Запустите PostgreSQL вручную

## 5. Миграции
```
python manage.py migrate
```

## 6. Создание суперпользователя
```
python manage.py createsuperuser
```

## 7. Запуск сервера
```
python manage.py runserver
```

---

# Особенности

- Полностью динамическое древовидное меню
- Хранение в БД
- Авто‑подсветка активного элемента
- 1 SQL‑запрос на меню
- Поддержка named URL и kwargs
- Удобная админка
- Готово к продакшену в Docker